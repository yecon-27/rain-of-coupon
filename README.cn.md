ğŸŒ è¯­è¨€åˆ‡æ¢ | Language Switch: [English](./README.md) | [ä¸­æ–‡](./README.cn.md)
# çº¢åŒ…é›¨å°ç¨‹åº

åŸºäº Vue 3 å’Œè‹¥ä¾æ¡†æ¶å¼€å‘äº†ä¸€ä¸ªå°ç¨‹åºã€‚ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š

- **æŠ½å¥–ç³»ç»Ÿ**ï¼šæ¯ä½ç”¨æˆ·æ¯å¤©æœ€å¤šæŠ½å¥– 3 æ¬¡ï¼Œè·å¥–åè‡ªåŠ¨ç»“æŸã€‚
- **æµé‡æ§åˆ¶**ï¼šæ£€æµ‹é«˜ç”¨æˆ·æµé‡å¹¶æ˜¾ç¤ºæ‹¥å µé€šçŸ¥ã€‚
- **äº¤äº’åŠ¨ç”»**ï¼šä¸‹è½çš„çº¢åŒ…åŠ¨ç”»å’Œå¯ç‚¹å‡»çš„å¥–åŠ±è§¦å‘ã€‚
- **ä¼˜æƒ åˆ¸é¡µé¢**ï¼šè®¾è®¡äº†å“åº”å¼å¸ƒå±€ï¼ŒåŒ…å«è¿”å›å¯¼èˆªã€‚

![çº¢åŒ…é›¨æˆªå›¾](https://github.com/user-attachments/assets/ee03551b-73a5-4565-862b-7016bc432df9)

## æŠ€æœ¯æ ˆ

- **å‰ç«¯**ï¼šVue 3, Pinia, Vite
- **åç«¯**ï¼šè‹¥ä¾æ¡†æ¶ï¼ˆSpring Bootï¼‰
- **æ•°æ®åº“**ï¼šMySQL
- **API**ï¼šRESTful API
- **éƒ¨ç½²**ï¼šNginx + Docker

## é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ .gitignore                    # Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ LICENSE                       # å¼€æºè®¸å¯è¯
â”œâ”€â”€ README.md                     # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ pom.xml                       # Maven æ ¹é…ç½®æ–‡ä»¶
â”œâ”€â”€ ry.bat                        # åç«¯å¯åŠ¨è„šæœ¬ï¼ˆWindowsï¼‰
â”œâ”€â”€ ry.sh                         # åç«¯å¯åŠ¨è„šæœ¬ï¼ˆLinux/Macï¼‰
â”œâ”€â”€ backend-sql                   # MySQL æ•°æ®åº“æ–‡ä»¶
â”œâ”€â”€ bin/                          # è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ clean.bat                 # æ¸…ç†è„šæœ¬
â”‚   â”œâ”€â”€ package.bat               # æ„å»º/æ‰“åŒ…è„šæœ¬
â”‚   â””â”€â”€ run.bat                   # è¿è¡Œè„šæœ¬
â”œâ”€â”€ doc/                          # æ–‡æ¡£ç›®å½•
â”‚   â””â”€â”€ RuoYi User Manual.docx    # è‹¥ä¾æ¡†æ¶è®¾ç½®æ‰‹å†Œ
â”œâ”€â”€ sql/                          # æ•°æ®åº“åˆå§‹åŒ– SQL æ–‡ä»¶
â”‚   â”œâ”€â”€ ry_20250522.sql           # è‹¥ä¾åŸºç¡€è¡¨
â”‚   â”œâ”€â”€  
â”‚   â”œâ”€â”€  
â”‚   â”œâ”€â”€  
â”‚   â””â”€â”€ quartz.sql                # Quartz å®šæ—¶ä»»åŠ¡
â”œâ”€â”€ rain-of-coupon/
â”‚   â”œâ”€â”€ public/                   # å…¬å…±é™æ€æ–‡ä»¶
â”‚   â”œâ”€â”€ docs/                     # é¡¹ç›®ç‰¹å®šæ–‡æ¡£
â”‚   â”œâ”€â”€ package.json              # NPM ä¾èµ–å’Œè„šæœ¬
â”‚   â”œâ”€â”€ vite.config.ts            # Vite é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ vercel.json               # Vercel éƒ¨ç½²é…ç½®
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ api/                  # API æŠ½è±¡å±‚ï¼ˆAxiosï¼‰
â”‚       â”œâ”€â”€ assets/               # é™æ€èµ„æºï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰
â”‚       â”œâ”€â”€ components/           # å¯å¤ç”¨ UI ç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ PrizeModal.vue          # ä¸­å¥–å¼¹çª—ç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ EncourageTip.vue        # æœªä¸­å¥–é¼“åŠ±æç¤ºå¼¹çª—
â”‚       â”‚   â”œâ”€â”€ RedPacket.vue           # çº¢åŒ…åŠ¨ç”»ä¸ç‚¹å‡»é€»è¾‘
â”‚       â”‚   â”œâ”€â”€ CountDown.vue           # å€’è®¡æ—¶åŠ¨ç”»ï¼ˆ3ã€2ã€1ï¼‰
â”‚       â”‚   â”œâ”€â”€ RulePopup.vue           # æ´»åŠ¨è§„åˆ™å¼¹çª—ï¼ˆæˆ–é™æ€å—ï¼‰
â”‚       â”‚   â”œâ”€â”€ CouponCard.vue          # å•å¼ ä¼˜æƒ åˆ¸å±•ç¤ºç»„ä»¶ï¼ˆåˆ¸åŒ…é¡µä½¿ç”¨ï¼‰
â”‚       â”‚   â”œâ”€â”€ CrowdingTip.vue         # æ´»åŠ¨æ‹¥æŒ¤æç¤ºç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ LoadingAnim.vue         # åŠ è½½åŠ¨æ•ˆï¼ˆå¦‚ç«ç®­åŠ¨ç”»ï¼‰
â”‚       â”‚   â”œâ”€â”€ BackButton.vue          # è¿”å›æŒ‰é’®ï¼ˆåˆ¸åŒ…é¡µä½¿ç”¨ï¼‰
â”‚       â”‚   â”œâ”€â”€ LoginForm.vue           # ç™»å½•è¡¨å•å°è£…ç»„ä»¶
â”‚       â”œâ”€â”€ composables/          # Vue 3 ç»„åˆå¼å‡½æ•°ï¼ˆä¾‹å¦‚ useUserï¼‰
â”‚       â”œâ”€â”€ directives/           # è‡ªå®šä¹‰ Vue æŒ‡ä»¤
â”‚       â”œâ”€â”€ router/               # Vue Router è®¾ç½®
â”‚       â”‚   â””â”€â”€ index.js              # è·¯ç”±å®šä¹‰
â”‚       â”œâ”€â”€ stores/               # çŠ¶æ€ç®¡ç†ï¼ˆPiniaï¼‰
â”‚       â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•°
â”‚       â”‚   â””â”€â”€ request.js            # Axios æ‹¦æˆªå™¨å’Œé…ç½®
â”‚       â”œâ”€â”€ views/                # é¡µé¢çº§ç»„ä»¶ï¼ˆè·¯ç”±ï¼‰
â”‚       â”‚   â”œâ”€â”€ HomePage.vue          # é¦–é¡µ
â”‚       â”‚   â”œâ”€â”€ LoginPage.vue         # ç™»å½•é¡µé¢
â”‚       â”‚   â”œâ”€â”€ LoadingPage.vue       # åŠ è½½åŠ¨ç”»é¡µé¢
â”‚       â”‚   â”œâ”€â”€ CountDownPage.vue     # å€’è®¡æ—¶é¡µé¢
â”‚       â”‚   â”œâ”€â”€ RedPacketPage.vue     # çº¢åŒ…æŠ½å¥–é¡µé¢
â”‚       â”‚   â”œâ”€â”€ RulePage.vue          # æ´»åŠ¨è§„åˆ™é¡µé¢
â”‚       â”‚   â””â”€â”€ CouponPage.vue        # ä¼˜æƒ åˆ¸/å¥–å“åˆ—è¡¨é¡µé¢
â”‚       â”œâ”€â”€ App.vue               # Vue æ ¹ç»„ä»¶
â”‚       â””â”€â”€ main.js               # åº”ç”¨å…¥å£
â”œâ”€â”€ ruoyi-ui/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/                  # API å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ assets/               # é™æ€èµ„æº
â”‚   â”‚   â”œâ”€â”€ components/           # UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ directive/            # è‡ªå®šä¹‰æŒ‡ä»¤
â”‚   â”‚   â”œâ”€â”€ layout/               # é¡µé¢å¸ƒå±€ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ router/               # Vue Router é…ç½®
â”‚   â”‚   â”œâ”€â”€ store/                # Vuex çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•°å’Œè¾…åŠ©æ–¹æ³•
â”‚   â”‚   â””â”€â”€ views/                # é¡µé¢è§†å›¾ï¼ˆç®¡ç†ç«¯ï¼‰
â”‚   â”œâ”€â”€ bin/                      # ç®¡ç†ç«¯å¯åŠ¨/æ„å»ºè„šæœ¬
â”‚   â”œâ”€â”€ package.json              # NPM é…ç½®
â”‚   â””â”€â”€ vue.config.js             # Vue CLI é…ç½®
â”œâ”€â”€ ruoyi-admin/                  # ä¸»åç«¯æ¨¡å—
â”‚   â”œâ”€â”€ src/main/java/com/ruoyi/  # Java æºä»£ç 
â”‚   â”œâ”€â”€ src/main/resources/       # åº”ç”¨é…ç½®
â”‚   â”‚   â”œâ”€â”€image/redpacket        # å›¾ç‰‡èµ„æº
|   â”‚   â”‚   â”œâ”€â”€ README.image.md   # å›¾ç‰‡ä¿¡æ¯
|   â”‚   â”‚   â”œâ”€â”€ ...
â”‚   â””â”€â”€ pom.xml                   # æ¨¡å—ç‰¹å®šçš„ Maven é…ç½®
â”œâ”€â”€ ruoyi-common/                 # å…±äº«å·¥å…·æ¨¡å—
â”œâ”€â”€ ruoyi-framework/             
```

## å¼€å‘è¿›å±•

ç¬¬ä¸€é˜¶æ®µå’Œç¬¬äºŒé˜¶æ®µå¯å¹¶è¡Œè¿›è¡Œï¼Œä¼˜å…ˆå®Œæˆ MVPã€‚

### ç¬¬ä¸€é˜¶æ®µï¼šæ•°æ®åº“è®¾è®¡ä¸ API å¼€å‘ï¼ˆè¿›è¡Œä¸­ï¼š2 å¤©ï¼‰

- **è®¾è®¡è¡¨**ï¼š`8.5 - present`
  1. prize â€“ å¥–å“é…ç½®ï¼šå¥–å“åç§°ï¼Œå¥–å“æ€»æ•°ï¼Œå‰©ä½™æ•°é‡ï¼Œä¸­å¥–æ¦‚ç‡
  2. user_prize_log â€“ ç”¨æˆ·æŠ½å¥–è®°å½•: ç”¨æˆ·IDï¼Œå¥–å“åç§°ï¼Œä¸­å¥–æ—¶é—´ï¼Œä½¿ç”¨çŠ¶æ€
  3. image_resource - å…¶ä½™é™æ€èµ„æºï¼šèµ„æºåç§°ï¼Œèµ„æºæ ‡è¯†ï¼Œæ–‡ä»¶åï¼Œæ–‡ä»¶è®¿é—®è·¯å¾„ï¼Œä½¿ç”¨åœºæ™¯ï¼Œæè¿°
  4. user_info -ï¼ˆè‹¥ä¾å†…ç½®ï¼‰ï¼šç”¨æˆ·åï¼Œå¯†ç ï¼Œæ‰‹æœºå·
  5. TOP10 ç½‘ç»œäººæ°”ç‰¹è‰²ç¾é£Ÿï¼šç¾é£Ÿåç§°ï¼Œæ’å
  6. â€œä¸€é•‡ä¸€å“â€ç‰¹è‰²èœï¼šç¾é£Ÿåç§°ï¼Œæ’å

- ä½¿ç”¨è‹¥ä¾å†…ç½®ä»£ç ç”Ÿæˆå™¨ç”Ÿæˆï¼š
  1. å®ä½“ç±»
  2. Mapper æ¥å£
  3. Service å’Œ Controller å±‚

- å¼€å‘ APIï¼š
  - æŠ½å¥–ï¼šPOST /api/draw
  - æŸ¥çœ‹æŠ½å¥–è®°å½•ï¼šGET /api/user/records
  - æ£€æŸ¥å‰©ä½™æŠ½å¥–æ¬¡æ•°ï¼šGET /api/user/drawCount
  - è·å–å¥–æ± é…ç½®ï¼šGET /api/prizes

### ç¬¬äºŒé˜¶æ®µï¼šå‰ç«¯é¡µé¢ç»“æ„ä¸ API é›†æˆï¼ˆè¿›è¡Œä¸­ï¼š3 å¤©ï¼‰

```
é¦–é¡µ (/)
â”œâ”€ ç‚¹å‡»â€œåŠ å…¥æ´»åŠ¨â€ â†’ ç™»å½•é¡µé¢ (/login)
â”‚   â”œâ”€ ç™»å½•æˆåŠŸå â†’ åˆ¤æ–­ä¸­å¥–çŠ¶æ€
â”‚   â”‚   â”œâ”€ å¦‚æœå·²ä¸­å¥– â†’ æ˜¾ç¤º PrizeModal å¼¹çª—
|   â”‚   â”œâ”€ å¦‚æœæœªä¸­å¥– â†’ è‡ªåŠ¨è·³è½¬ â†’ åŠ è½½é¡µé¢ (/loading)
|   |   â”‚   â”œâ”€ å¦‚æœäººæ•°æ‹¥æŒ¤ â†’ æ‹¥æŒ¤æç¤ºç»„ä»¶
|   |   â”‚   â”œâ”€ å¦‚æœä¸æ‹¥æŒ¤ â†’ å€’è®¡æ—¶é¡µé¢ (/countdown)
|   â”‚   â”‚   â”‚   â”œâ”€ å€’è®¡æ—¶ç»“æŸ â†’ çº¢åŒ…é¡µé¢ (/redpacket)
|   â”‚   â”‚   â”‚   â”‚   â”œâ”€ ç”¨æˆ·ä¸­å¥– â†’ æ˜¾ç¤º PrizeModal å¼¹çª—
|   â”‚   â”‚   â”‚   â”‚   â””â”€ ç”¨æˆ·æœªä¸­å¥– â†’ æ˜¾ç¤º EncourageTip å¼¹çª—
â”‚   â”œâ”€ ç™»å½•æˆåŠŸå â†’ åˆ¤æ–­ä¸­å¥–çŠ¶æ€
â”‚   â”‚   â”œâ”€ å¦‚æœå·²ä¸­å¥– â†’ æ˜¾ç¤º PrizeModal å¼¹çª—
|   â”‚   â”œâ”€ å¦‚æœæœªä¸­å¥– â†’ è‡ªåŠ¨è·³è½¬ â†’ åŠ è½½é¡µé¢ (/loading)
|   |   â”‚   â”œâ”€ å¦‚æœäººæ•°æ‹¥æŒ¤ â†’ æ‹¥æŒ¤æç¤ºç»„ä»¶
|   |   â”‚   â”œâ”€ å¦‚æœä¸æ‹¥æŒ¤ â†’ å€’è®¡æ—¶é¡µé¢ (/countdown)
|   â”‚   â”‚   â”‚   â”œâ”€ å€’è®¡æ—¶ç»“æŸ â†’ çº¢åŒ…é¡µé¢ (/redpacket)
|   â”‚   â”‚   â”‚   â”‚   â”œâ”€ ç”¨æˆ·ä¸­å¥– â†’ æ˜¾ç¤º PrizeModal å¼¹çª—
|   â”‚   â”‚   â”‚   â”‚   â””â”€ ç”¨æˆ·æœªä¸­å¥– â†’ æ˜¾ç¤º EncourageTip å¼¹çª—
â”‚   â”‚   â”‚   â””â”€ æŠ½å¥–å â†’ è¿”å›é¦–é¡µ (/)
â”œâ”€ ç‚¹å‡»â€œæ´»åŠ¨è§„åˆ™â€ â†’ è§„åˆ™é¡µé¢ (/rule)
â””â”€ æŠ½å¥–ç»“æŸæˆ–ç”¨æˆ·ç™»å½•å â†’ ä¼˜æƒ åˆ¸é¡µé¢ (/coupon)
```
```
ğŸ“¦ è·¯ç”±é¡µé¢ç»“æ„ï¼ˆPageå±‚çº§ï¼‰
/
â”œâ”€â”€ HomePage (/)
â”‚   â”œâ”€â”€ åŠ å…¥æ´»åŠ¨ â†’ ç™»å½•é¡µï¼ˆ/loginï¼‰
â”‚   â””â”€â”€ æ´»åŠ¨è§„åˆ™é¡µï¼ˆ/ruleï¼‰
â”‚   â””â”€â”€ æŸ¥çœ‹æˆ‘çš„ä¼˜æƒ åˆ¸ï¼ˆ/couponï¼‰

â”œâ”€â”€ LoginPage (/login)
â”‚   â”œâ”€â”€ ç™»å½•æˆåŠŸ â†’ åˆ¤æ–­æ˜¯å¦ä¸­å¥–
â”‚   â”‚   â”œâ”€â”€ å·²ä¸­å¥– â†’ PrizeModalï¼ˆç»„ä»¶ï¼‰
â”‚   â”‚   â””â”€â”€ æœªä¸­å¥– â†’ /loading

â”œâ”€â”€ LoadingPage (/loading)
â”‚   â”œâ”€â”€ æ‹¥æŒ¤ â†’ CrowdingTipï¼ˆç»„ä»¶ï¼‰
â”‚   â””â”€â”€ æ­£å¸¸ â†’ å€’è®¡æ—¶é¡µé¢ /countdown

â”œâ”€â”€ CountdownPage (/countdown)
â”‚   â””â”€â”€ å€’è®¡æ—¶ç»“æŸ â†’ /redpacket

â”œâ”€â”€ RedPacketPage (/redpacket)
â”‚   â”œâ”€â”€ æŠ½å¥–å®Œæˆï¼ˆç‚¹å‡»çº¢åŒ…ï¼‰
â”‚   â”‚   â”œâ”€â”€ ä¸­å¥– â†’ PrizeModalï¼ˆç»„ä»¶ï¼‰
â”‚   â”‚   â””â”€â”€ æœªä¸­å¥– â†’ EncourageTipï¼ˆç»„ä»¶ï¼‰
â”‚   â””â”€â”€ æŠ½å¥–åè‡ªåŠ¨è¿”å› HomePage

â”œâ”€â”€ RulePage (/rule)
â”‚   â””â”€â”€ æ˜¾ç¤ºæ´»åŠ¨è§„åˆ™é™æ€å†…å®¹

â”œâ”€â”€ CouponPage (/coupon)
â”‚   â””â”€â”€ æ˜¾ç¤ºå·²é¢†å–çš„åˆ¸ + è¿”å›æŒ‰é’®

```
- **LoginPage.vue**
  1. ç”¨æˆ·çŠ¶æ€æ£€æµ‹ï¼ˆé€šè¿‡ token ç™»å½•ï¼‰
  2. é…ç½® Axios è¯·æ±‚æ‹¦æˆªå™¨

- **çº¢åŒ…é€»è¾‘**ï¼š*ä¸‹è½çº¢åŒ…åŠ¨ç”»*ï¼Œ*ç‚¹å‡»è§¦å‘æŠ½å¥–è¯·æ±‚*ï¼Œ*å¼¹çª—æ˜¾ç¤ºä¸­å¥–æˆ–æœªä¸­å¥–*

```javascript
let totalRedPackets = 100;
let interval = setInterval(() => {
  if (totalRedPackets <= 0) clearInterval(interval);
  generateRedPacket(); // æ¯æ¬¡ç”Ÿæˆ 1 ä¸ªçº¢åŒ…åŠ¨ç”»
  totalRedPackets--;
}, 200);
```

- **æµé‡æ£€æµ‹**ï¼šâ€œé™æµâ€é—®é¢˜ -> åç«¯é™æµ + çŠ¶æ€å“åº” + å‰ç«¯åŠ è½½åˆ¤æ–­ï¼Œè¿”å› `{ "status": "crowded" } // æˆ– "ok"`

- **éšæœºåˆ¤æ–­ç”¨æˆ·æ˜¯å¦æŠ¢åˆ°çº¢åŒ…**ï¼š

```java
// æŸ¥è¯¢ä»Šæ—¥æŠ½å¥–è®°å½•
List<UserPrizeLog> logs = userPrizeLogMapper.queryToday(userId);
if (logs.size() >= 3) return fail("æ¬¡æ•°ç”¨å°½");

boolean alreadyWon = logs.stream().anyMatch(log -> log.isWin());
if (alreadyWon) return fail("å·²ä¸­å¥–");

boolean isWin = Math.random() < 0.2; // 20% ä¸­å¥–æ¦‚ç‡ï¼Œåå°å¯é…ç½®
if (isWin) {
    // éšæœºåˆ†é…å¥–å“
    Prize prize = prizeService.getRandomAvailablePrize();
    saveUserPrize(userId, prize);
}
```

**å¯é…ç½®çš„å¥–å“åˆ†é…ç®—æ³•**ï¼š
- ä½¿ç”¨ Redis è¿›è¡Œåº“å­˜æ‰£å‡ï¼ˆé˜²æ­¢å¹¶å‘è¶…å‘ï¼‰
- å¥–å“æ¦‚ç‡å­˜å‚¨åœ¨æ•°æ®åº“çš„å¯é…ç½®å­—æ®µä¸­

### ç¬¬ä¸‰é˜¶æ®µï¼šé›†æˆä¸éƒ¨ç½²å‡†å¤‡ï¼ˆè¿›è¡Œä¸­ï¼š1 å¤©ï¼‰

- è¿æ¥å‰ç«¯å’Œåç«¯æŠ½å¥–é€»è¾‘
- éªŒè¯æŠ½å¥–é™åˆ¶å’Œä¸­å¥–é€»è¾‘

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯æˆæƒã€‚è¯¦æƒ…è§ [LICENSE](./LICENSE) æ–‡ä»¶ã€‚
