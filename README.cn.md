ğŸŒ è¯­è¨€åˆ‡æ¢ | Language Switch: [English](./README.md) | [ä¸­æ–‡](./README.cn.md)

# çº¢åŒ…é›¨å°ç¨‹åº

åŸºäº Vue 3 å’Œè‹¥ä¾æ¡†æ¶å¼€å‘äº†ä¸€ä¸ªå°ç¨‹åºã€‚ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š

- **çº¢åŒ…é›¨æŠ¢çº¢åŒ…ç³»ç»Ÿ**ï¼šæ¯ä½ç”¨æˆ·æ¯å¤©æœ€å¤šå‚ä¸ 3 æ¬¡ï¼Œè·å¥–åè‡ªåŠ¨ç»“æŸã€‚ç‚¹å‡»çº¢åŒ…æ•°é‡è¶Šå¤šï¼Œä¸­å¥–æ¦‚ç‡è¶Šå¤§ã€‚
- **æµé‡æ§åˆ¶**ï¼šæ£€æµ‹é«˜ç”¨æˆ·æµé‡å¹¶æ˜¾ç¤ºæ‹¥å µé€šçŸ¥ã€‚
- **äº¤äº’åŠ¨ç”»**ï¼šä¸‹è½çš„çº¢åŒ…åŠ¨ç”»å’Œå¯ç‚¹å‡»çš„å¥–åŠ±è§¦å‘ã€‚
- **ä¼˜æƒ åˆ¸é¡µé¢**ï¼šè®¾è®¡äº†å“åº”å¼å¸ƒå±€ï¼ŒåŒ…å«è¿”å›å¯¼èˆªã€‚

![çº¢åŒ…é›¨æˆªå›¾](https://github.com/user-attachments/assets/ee03551b-73a5-4565-862b-7016bc432df9)

## æŠ€æœ¯æ ˆ

- **å‰ç«¯**ï¼šVue 3, Pinia, Vite
- **åç«¯**ï¼šè‹¥ä¾æ¡†æ¶ï¼ˆSpring Bootï¼‰
- **æ•°æ®åº“**ï¼šMySQL
- **API**ï¼šRESTful API
- **éƒ¨ç½²**ï¼šNginx + Docker

## æ•°æ®åº“è¡¨ç»“æ„

### æ ¸å¿ƒä¸šåŠ¡è¡¨

1. **redpacket_prize**ï¼ˆå¥–å“é…ç½®è¡¨ï¼‰
   - å¥–å“åç§°ã€æ€»æ•°é‡ã€å‰©ä½™æ•°é‡ã€ä¸­å¥–æ¦‚ç‡
2. **redpacket_user_participation_log**ï¼ˆç”¨æˆ·å‚ä¸è®°å½•è¡¨ï¼‰
   - ç”¨æˆ· IDã€IP åœ°å€ã€æ˜¯å¦ä¸­å¥–ã€å‚ä¸æ—¶é—´ã€å¥–å“ä¿¡æ¯
3. **redpacket_event_config**ï¼ˆæ´»åŠ¨é…ç½®è¡¨ï¼‰
   - æ´»åŠ¨æ—¶é—´ã€å¹¶å‘é™åˆ¶ã€æ¯æ—¥æ¸¸æˆæ¬¡æ•°é™åˆ¶
4. **image_resource**ï¼ˆå›¾ç‰‡èµ„æºè¡¨ï¼‰
   - çº¢åŒ…é›¨ç›¸å…³çš„é™æ€å›¾ç‰‡èµ„æºç®¡ç†

### ä¸šåŠ¡ç‰¹è‰²

- **é˜²åˆ·æœºåˆ¶**ï¼šIP é¢‘ç‡é™åˆ¶ã€æ¯æ—¥æ¬¡æ•°é™åˆ¶ã€ä¸­å¥–ååœæ­¢
- **æ¦‚ç‡ç®—æ³•**ï¼šåŸºäºç‚¹å‡»æ•°é‡çš„åŠ¨æ€æ¦‚ç‡è®¡ç®—
- **å¹¶å‘æ§åˆ¶**ï¼šRedis ç¼“å­˜ + æ•°æ®åº“äº‹åŠ¡ä¿è¯æ•°æ®ä¸€è‡´æ€§

## é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ .gitignore                    # Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ LICENSE                       # å¼€æºè®¸å¯è¯
â”œâ”€â”€ README.md                     # é¡¹ç›®æ–‡æ¡£è¯´æ˜
â”œâ”€â”€ pom.xml                       # Maven æ ¹é…ç½®æ–‡ä»¶
â”œâ”€â”€ ry.bat                        # åç«¯å¯åŠ¨è„šæœ¬ï¼ˆWindowsï¼‰
â”œâ”€â”€ ry.sh                         # åç«¯å¯åŠ¨è„šæœ¬ï¼ˆLinux/Macï¼‰
â”œâ”€â”€ backend-sql                   # MySQL æ•°æ®åº“æ–‡ä»¶
â”œâ”€â”€ bin/                          # Shell/æ‰¹å¤„ç†è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ clean.bat                 # æ¸…ç†è„šæœ¬
â”‚   â”œâ”€â”€ package.bat               # æ„å»º/æ‰“åŒ…è„šæœ¬
â”‚   â””â”€â”€ run.bat                   # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ doc/                          # æ–‡æ¡£ç›®å½•
â”‚   â””â”€â”€ ruoyi-code-generation-config   # ä»£ç ç”Ÿæˆå™¨å¯¼å‡ºé…ç½®
â”œâ”€â”€ sql/                          # æ•°æ®åº“åˆå§‹åŒ– SQL æ–‡ä»¶
â”‚   â”œâ”€â”€ ry_20250522.sql               # è‹¥ä¾æ¡†æ¶åŸºç¡€è¡¨
â”‚   â”œâ”€â”€ coupon_activity_simplified.sql # æ´»åŠ¨ç›¸å…³è¡¨ï¼šå¥–å“ã€æ—¥å¿—ã€é…ç½®ã€å›¾ç‰‡èµ„æºã€é£Ÿå“ç­‰
â”‚   â”œâ”€â”€ add-participation-log-table.sql # çº¢åŒ…é›¨ç”¨æˆ·å‚ä¸è®°å½•è¡¨
â”‚   â”œâ”€â”€ business_log.sql              # ä¸šåŠ¡æ—¥å¿—è¡¨
â”‚   â”œâ”€â”€ README.sql.md                 # SQL æ–‡ä»¶è¯´æ˜ï¼ˆåŒ…å«çº¢åŒ…é›¨è¡¨ç»“æ„ï¼‰
â”‚   â””â”€â”€ quartz.sql                    # Quartz å®šæ—¶ä»»åŠ¡ç›¸å…³è¡¨
â”œâ”€â”€ rain-of-coupon/              # å‰ç«¯é¡¹ç›®ï¼ˆVue 3 + TypeScript + Piniaï¼‰
â”‚   â”œâ”€â”€ public/                   # å…¬å…±é™æ€èµ„æº
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/                  # API è¯·æ±‚å°è£…ï¼ˆTypeScript + Fetchï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ lottery.ts              # ğŸ”¹ API å±‚ï¼šHTTP è¯·æ±‚
â”‚   â”‚   â”œâ”€â”€ stores/lottery.ts           # ğŸ”¸ çŠ¶æ€å±‚ï¼šçº¯çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ services/lotteryService.ts  # ğŸ”¹ æœåŠ¡å±‚ï¼šä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”‚â”€â”€ composables/useLottery.ts   # ğŸ”¸ ç»„åˆå±‚ï¼šç»„ä»¶æ¥å£
â”‚   â”‚   â””â”€â”€ examples/                   # ğŸ“‹ ä½¿ç”¨ç¤ºä¾‹
â”‚   â”‚   â”‚   â””â”€â”€ LotteryUsageExample.vue
â”‚   â”‚   â”œâ”€â”€ assets/               # é™æ€èµ„æºï¼ˆå›¾ç‰‡ã€æ ·å¼ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ components/           # å¯å¤ç”¨ Vue 3 ç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ PrizeModal.vue          # ä¸­å¥–å¼¹çª—
â”‚       â”‚   â”œâ”€â”€ EncourageTip.vue        # æœªä¸­å¥–æ—¶é¼“åŠ±æç¤º
â”‚       â”‚   â”œâ”€â”€ RedPacket.vue           # çº¢åŒ…åŠ¨ç”»é€»è¾‘
â”‚       â”‚   â”œâ”€â”€ CountDown.vue           # å€’è®¡æ—¶åŠ¨ç”»ï¼ˆ3,2,1ï¼‰
â”‚       â”‚   â”œâ”€â”€ RulePopup.vue           # æ´»åŠ¨è§„åˆ™å¼¹çª—æˆ–ä¿¡æ¯å—
â”‚       â”‚   â”œâ”€â”€ CouponCard.vue          # ä¼˜æƒ åˆ¸å±•ç¤ºç»„ä»¶ï¼ˆåœ¨ /coupon é¡µé¢ä½¿ç”¨ï¼‰
â”‚       â”‚   â”œâ”€â”€ CrowdingTip.vue         # â€œäººæ•°è¿‡å¤šâ€æç¤ºç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ LoadingAnim.vue         # ç«ç®­ / åŠ è½½åŠ¨ç”»ç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ BackButton.vue          # è¿”å›æŒ‰é’®ç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ LoginForm.vue           # ç™»å½•è¡¨å•ç»„ä»¶
â”‚       â”œâ”€â”€ directives/           # è‡ªå®šä¹‰æŒ‡ä»¤ï¼ˆå¦‚è‡ªåŠ¨èšç„¦ç­‰ï¼‰
â”‚       â”œâ”€â”€ router/               # Vue Router è·¯ç”±é…ç½®
â”‚       â”‚   â””â”€â”€ index.js              # è·¯ç”±å®šä¹‰æ–‡ä»¶
â”‚       â”œâ”€â”€ store/                # Vuex çŠ¶æ€ç®¡ç†ç›®å½•
â”‚       â”‚   â”œâ”€â”€ index.js              # Vuex ä¸»å…¥å£
â”‚       â”‚   â””â”€â”€ modules/              # æ¨¡å—åŒ–çŠ¶æ€ç®¡ç†
â”‚       â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•°
â”‚       â”‚   â””â”€â”€ request.js            # Axios è¯·æ±‚å°è£…ä¸æ‹¦æˆªå™¨
â”‚       â”œâ”€â”€ views/                # é¡µé¢çº§ç»„ä»¶ï¼ˆå¯¹åº”è·¯ç”±ï¼‰
â”‚       â”‚   â”œâ”€â”€ HomePage.vue          # é¦–é¡µ
â”‚       â”‚   â”œâ”€â”€ LoginPage.vue         # ç™»å½•é¡µ
â”‚       â”‚   â”œâ”€â”€ LoadingPage.vue       # åŠ è½½åŠ¨ç”»é¡µ
â”‚       â”‚   â”œâ”€â”€ CountDownPage.vue     # å€’è®¡æ—¶é¡µ
â”‚       â”‚   â”œâ”€â”€ RedPacketPage.vue     # çº¢åŒ…æŠ½å¥–é¡µ
â”‚       â”‚   â”œâ”€â”€ RulePage.vue          # æ´»åŠ¨è§„åˆ™é¡µ
â”‚       â”‚   â””â”€â”€ CouponPage.vue        # ä¼˜æƒ åˆ¸ / å¥–å“åˆ—è¡¨é¡µ
â”‚       â”œâ”€â”€ App.vue               # æ ¹ç»„ä»¶
â”‚       â””â”€â”€ main.js               # åº”ç”¨å…¥å£æ–‡ä»¶ï¼ˆVue 2 + Vuex åˆå§‹åŒ–ï¼‰
â”œâ”€â”€ ruoyi-ui/                    # åå°ç®¡ç†å‰ç«¯ï¼ˆåŸºäº Vue 2ï¼‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/                  # åå°APIæ¥å£å±‚å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ redpacket/
â”‚   â”‚   â”‚   â””â”€â”€ lottery.js        # çº¢åŒ…é›¨APIæ¥å£å°è£…
â”‚   â”‚   â”œâ”€â”€ assets/               # é™æ€èµ„æº
â”‚   â”‚   â”œâ”€â”€ components/           # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ directive/            # è‡ªå®šä¹‰æŒ‡ä»¤
â”‚   â”‚   â”œâ”€â”€ layout/               # é¡µé¢å¸ƒå±€ç»“æ„
â”‚   â”‚   â”œâ”€â”€ router/               # è·¯ç”±è®¾ç½®
â”‚   â”‚   â”œâ”€â”€ store/                # Vuex çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ views/                # é¡µé¢è§†å›¾ï¼ˆåå°ï¼‰
â”‚   â”œâ”€â”€ bin/                      # å¯åŠ¨/æ„å»ºè„šæœ¬
â”‚   â”œâ”€â”€ package.json              # NPM é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ vue.config.js             # Vue CLI é…ç½®æ–‡ä»¶
â”œâ”€â”€ ruoyi-admin/                 # åç«¯ä¸»æ¨¡å—
â”‚   â”œâ”€â”€ src/main/java/com/ruoyi/  # Java æºç 
â”‚   â”œâ”€â”€ src/main/resources/       # é…ç½®æ–‡ä»¶ä¸èµ„æº
â”‚   â”‚   â”œâ”€â”€image/redpacket        # çº¢åŒ…å›¾ç‰‡èµ„æºç›®å½•
â”‚   â”‚   â”‚   â”œâ”€â”€ README.image.md   # å›¾ç‰‡èµ„æºè¯´æ˜
â”‚   â”‚   â”‚   â”œâ”€â”€ ...
â”‚   â””â”€â”€ pom.xml                   # æ¨¡å—ä¸“å± Maven é…ç½®
â”œâ”€â”€ ruoyi-common/                # é€šç”¨å·¥å…·æ¨¡å—ï¼ˆJavaï¼‰
â”œâ”€â”€ ruoyi-framework/             # æ¡†æ¶æ ¸å¿ƒæ¨¡å—ï¼ˆJavaï¼‰
```

## ç”¨æˆ·æµ & è·¯ç”±é¡µé¢ç»“æ„ï¼ˆPage å±‚çº§ï¼‰

1.

```
é¦–é¡µ (/)
â”œâ”€ ç‚¹å‡»â€œåŠ å…¥æ´»åŠ¨â€ â†’ ç™»å½•é¡µé¢ (/login)
â”‚   â”œâ”€ ç™»å½•æˆåŠŸå â†’ åˆ¤æ–­ä¸­å¥–çŠ¶æ€
â”‚   â”‚   â”œâ”€ å¦‚æœå·²ä¸­å¥– â†’ æ˜¾ç¤º PrizeModal å¼¹çª—
|   â”‚   â”œâ”€ å¦‚æœæœªä¸­å¥– â†’ è‡ªåŠ¨è·³è½¬ â†’ åŠ è½½é¡µé¢ (/loading)
|   |   â”‚   â”œâ”€ å¦‚æœäººæ•°æ‹¥æŒ¤ â†’ æ‹¥æŒ¤æç¤ºç»„ä»¶
|   |   â”‚   â”œâ”€ å¦‚æœä¸æ‹¥æŒ¤ â†’ å€’è®¡æ—¶é¡µé¢ (/countdown)
|   â”‚   â”‚   â”‚   â”œâ”€ å€’è®¡æ—¶ç»“æŸ â†’ çº¢åŒ…é¡µé¢ (/redpacket)
|   â”‚   â”‚   â”‚   â”‚   â”œâ”€ ç”¨æˆ·ä¸­å¥– â†’ æ˜¾ç¤º PrizeModal å¼¹çª—
|   â”‚   â”‚   â”‚   â”‚   â””â”€ ç”¨æˆ·æœªä¸­å¥– â†’ æ˜¾ç¤º EncourageTip å¼¹çª—
â”‚   â”‚   â”‚   â””â”€ æŠ½å¥–å â†’ è¿”å›é¦–é¡µ (/)
â”œâ”€ ç‚¹å‡»â€œæ´»åŠ¨è§„åˆ™â€ â†’ è§„åˆ™é¡µé¢ (/rule)
â””â”€ æŠ½å¥–ç»“æŸæˆ–ç”¨æˆ·ç™»å½•å â†’ ä¼˜æƒ åˆ¸é¡µé¢ (/coupon)
```

2.

```
/
â”œâ”€â”€ HomePage (/)
â”‚   â”œâ”€â”€ åŠ å…¥æ´»åŠ¨ â†’ ç™»å½•é¡µï¼ˆ/loginï¼‰
â”‚   â””â”€â”€ æ´»åŠ¨è§„åˆ™é¡µï¼ˆ/ruleï¼‰
â”‚   â””â”€â”€ æŸ¥çœ‹æˆ‘çš„ä¼˜æƒ åˆ¸ï¼ˆ/couponï¼‰

â”œâ”€â”€ LoginPage (/login)
â”‚   â”œâ”€â”€ ç™»å½•æˆåŠŸ â†’ åˆ¤æ–­æ˜¯å¦ä¸­å¥–
â”‚   â”‚   â”œâ”€â”€ å·²ä¸­å¥– â†’ PrizeModalï¼ˆç»„ä»¶ï¼‰
â”‚   â”‚   â””â”€â”€ æœªä¸­å¥– â†’ /loading

â”œâ”€â”€ LoadingPage (/loading)
â”‚   â”œâ”€â”€ æ‹¥æŒ¤ â†’ CrowdingTipï¼ˆç»„ä»¶ï¼‰
â”‚   â””â”€â”€ æ­£å¸¸ â†’ å€’è®¡æ—¶é¡µé¢ /countdown

â”œâ”€â”€ CountdownPage (/countdown)
â”‚   â””â”€â”€ å€’è®¡æ—¶ç»“æŸ â†’ /redpacket

â”œâ”€â”€ RedPacketPage (/redpacket)
â”‚   â”œâ”€â”€ æŠ½å¥–å®Œæˆï¼ˆç‚¹å‡»çº¢åŒ…ï¼‰
â”‚   â”‚   â”œâ”€â”€ ä¸­å¥– â†’ PrizeModalï¼ˆç»„ä»¶ï¼‰
â”‚   â”‚   â””â”€â”€ æœªä¸­å¥– â†’ EncourageTipï¼ˆç»„ä»¶ï¼‰
â”‚   â””â”€â”€ æŠ½å¥–åè‡ªåŠ¨è¿”å› HomePage

â”œâ”€â”€ RulePage (/rule)
â”‚   â””â”€â”€ æ˜¾ç¤ºæ´»åŠ¨è§„åˆ™é™æ€å†…å®¹

â”œâ”€â”€ CouponPage (/coupon)
â”‚   â””â”€â”€ æ˜¾ç¤ºå·²é¢†å–çš„åˆ¸ + è¿”å›æŒ‰é’®

```

## å¼€å‘è¿›å±•

ç¬¬ä¸€é˜¶æ®µå’Œç¬¬äºŒé˜¶æ®µå¯å¹¶è¡Œè¿›è¡Œï¼Œä¼˜å…ˆå®Œæˆ MVPã€‚

### ç¬¬ä¸€é˜¶æ®µï¼šæ•°æ®åº“è®¾è®¡ä¸ API å¼€å‘ï¼ˆè¿›è¡Œä¸­ï¼š3 å¤©ï¼‰

#### âœ… **å·²å®Œæˆä»»åŠ¡ï¼š**

**æ•°æ®åº“è®¾è®¡** ` 8/5 - 8/6``8.7ä¸Šåˆè¡¥å……äº†å‚ä¸æ´»åŠ¨çš„è¡¨æ•°æ®åº“ `

**ä»£ç ç”Ÿæˆ** `8/6`

- âœ… å®ä½“ç±»å·²ç”Ÿæˆ
- âœ… Mapper æ¥å£å·²ç”Ÿæˆ
- âœ… åŸºç¡€ CRUD Service å’Œ Controller å±‚å·²ç”Ÿæˆ
- âœ… èœå•é…ç½® SQL æ–‡ä»¶å·²ç”Ÿæˆ

  **çº¢åŒ…é›¨æŠ¢çº¢åŒ…æ§åˆ¶å™¨å’ŒæœåŠ¡å±‚çš„æ ¸å¿ƒä¸šåŠ¡é€»è¾‘**`8/6`

- âœ… æ¯æ—¥ 3 æ¬¡æ¸¸æˆé™åˆ¶
- âœ… ä¸­å¥–ååœæ­¢å‚ä¸ï¼ˆä¸€äººåªèƒ½ä¸­ä¸€æ¬¡ï¼‰
- âœ… IP é¢‘ç‡é™åˆ¶ï¼ˆ1 å°æ—¶ 10 æ¬¡ï¼‰
- âœ… æ´»åŠ¨æ—¶é—´æ§åˆ¶
- âœ… åŸºäºç‚¹å‡»æ•°é‡çš„æ¦‚ç‡ç®—æ³•ï¼ˆç‚¹å‡»è¶Šå¤šï¼Œä¸­å¥–æ¦‚ç‡è¶Šå¤§ï¼‰
- âœ… çº¢åŒ…é›¨äº¤äº’æ¨¡å¼ï¼ˆ50 ç§’å†… 100 ä¸ªçº¢åŒ…é£˜è½ï¼‰
- âœ… è‡ªåŠ¨åº“å­˜æ‰£å‡
- âœ… é›¶åº“å­˜è‡ªåŠ¨æ’é™¤
- âœ… äº‹åŠ¡ä¿è¯æ•°æ®ä¸€è‡´æ€§

  **API æ¥å£è§„èŒƒ**`8/6`

1. POST /api/lottery/draw âœ…

- æ‰§è¡Œçº¢åŒ…é›¨æŠ¢çº¢åŒ…é€»è¾‘
- åŸºäºç‚¹å‡»æ•°é‡è®¡ç®—ä¸­å¥–æ¦‚ç‡
- æ£€æŸ¥ç”¨æˆ·èµ„æ ¼
- ä¿å­˜å‚ä¸è®°å½•
- è¿”å›æŠ¢çº¢åŒ…ç»“æœ

2. GET /api/lottery/records âœ…

- è·å–ç”¨æˆ·å†å²å‚ä¸è®°å½•
- éœ€è¦ç”¨æˆ·ç™»å½•

3. GET /api/lottery/drawCount âœ…

- è·å–å‰©ä½™æ¸¸æˆæ¬¡æ•°
- æ£€æŸ¥æ˜¯å¦å·²ä¸­å¥–
- è¿”å›æ˜¯å¦å¯ä»¥å‚ä¸çº¢åŒ…é›¨

4. GET /api/lottery/prizes âœ…

- è·å–æ‰€æœ‰å¯ç”¨å¥–å“åˆ—è¡¨
- è‡ªåŠ¨è¿‡æ»¤åº“å­˜ä¸º 0 çš„å¥–å“

5. GET /api/lottery/status âœ…

- æ£€æŸ¥ç”¨æˆ·å‚ä¸çº¢åŒ…é›¨èµ„æ ¼
- è¿”å›è¯¦ç»†çš„çŠ¶æ€ä¿¡æ¯
- åŒ…å«ä¸èƒ½å‚ä¸çš„åŸå› 

6. GET /api/activity/config âœ…

- è·å–æ´»åŠ¨é…ç½®ä¿¡æ¯
- æ´»åŠ¨æ—¶é—´ã€é™åˆ¶ç­‰
- æ´»åŠ¨çŠ¶æ€åˆ¤æ–­

### ç¬¬äºŒé˜¶æ®µï¼šå‰ç«¯é¡µé¢ç»“æ„ä¸ API é›†æˆï¼ˆè¿›è¡Œä¸­ï¼š3 å¤©ï¼‰

[README.frontend.md](doc\frontend-development-guide.md)

- **LoginPage.vue**

  1. ç”¨æˆ·çŠ¶æ€æ£€æµ‹ï¼ˆé€šè¿‡ token ç™»å½•ï¼‰
  2. é…ç½® Axios è¯·æ±‚æ‹¦æˆªå™¨

- **çº¢åŒ…é›¨é€»è¾‘**ï¼š_50 ç§’å†… 100 ä¸ªçº¢åŒ…ä¸‹è½åŠ¨ç”»_ï¼Œ_ç‚¹å‡»çº¢åŒ…ç´¯ç§¯è®¡æ•°_ï¼Œ_æ¸¸æˆç»“æŸåæ ¹æ®ç‚¹å‡»æ•°é‡è®¡ç®—ä¸­å¥–æ¦‚ç‡_ï¼Œ_å¼¹çª—æ˜¾ç¤ºä¸­å¥–æˆ–æœªä¸­å¥–_

```javascript
let totalRedPackets = 100;
let interval = setInterval(() => {
  if (totalRedPackets <= 0) clearInterval(interval);
  generateRedPacket(); // æ¯æ¬¡ç”Ÿæˆ 1 ä¸ªçº¢åŒ…åŠ¨ç”»
  totalRedPackets--;
}, 200);
```

- **æµé‡æ£€æµ‹**ï¼šâ€œé™æµâ€é—®é¢˜ -> åç«¯é™æµ + çŠ¶æ€å“åº” + å‰ç«¯åŠ è½½åˆ¤æ–­ï¼Œè¿”å› `{ "status": "crowded" } // æˆ– "ok"`

- **åŸºäºç‚¹å‡»æ•°é‡åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æŠ¢åˆ°çº¢åŒ…**ï¼š

```java
// æŸ¥è¯¢ä»Šæ—¥å‚ä¸è®°å½•
List<UserPrizeLog> logs = userPrizeLogMapper.queryToday(userId);
if (logs.size() >= 3) return fail("æ¬¡æ•°ç”¨å°½");

boolean alreadyWon = logs.stream().anyMatch(log -> log.isWin());
if (alreadyWon) return fail("å·²ä¸­å¥–");

// åŸºäºç‚¹å‡»æ•°é‡è®¡ç®—ä¸­å¥–æ¦‚ç‡
int clickedCount = request.getClickedCount(); // ç”¨æˆ·ç‚¹å‡»çš„çº¢åŒ…æ•°é‡
double baseProbability = 0.05; // 5% åŸºç¡€æ¦‚ç‡
double probabilityMultiplier = 1.0 + Math.log(clickedCount) / Math.log(10) * 0.8;
double finalProbability = baseProbability * Math.min(probabilityMultiplier, 4.0);

boolean isWin = Math.random() < finalProbability;
if (isWin) {
    // éšæœºåˆ†é…å¥–å“
    Prize prize = prizeService.getRandomAvailablePrize();
    saveUserPrize(userId, prize);
}
```

**å¯é…ç½®çš„å¥–å“åˆ†é…ç®—æ³•**ï¼š

- ä½¿ç”¨ Redis è¿›è¡Œåº“å­˜æ‰£å‡ï¼ˆé˜²æ­¢å¹¶å‘è¶…å‘ï¼‰
- å¥–å“æ¦‚ç‡å­˜å‚¨åœ¨æ•°æ®åº“çš„å¯é…ç½®å­—æ®µä¸­

### ç¬¬ä¸‰é˜¶æ®µï¼šæµ‹è¯•ï¼ˆ1 å¤©ï¼‰

- è¿æ¥å‰ç«¯å’Œåç«¯æŠ½å¥–é€»è¾‘
- éªŒè¯æŠ½å¥–é™åˆ¶å’Œä¸­å¥–é€»è¾‘

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯æˆæƒã€‚è¯¦æƒ…è§ [LICENSE](./LICENSE) æ–‡ä»¶ã€‚
