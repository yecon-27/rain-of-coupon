# 若依代码生成配置指南

## 红包雨抽奖活动 - 数据库表字段配置

---

## 1. redpacket_prize（奖品配置表）

| 字段名          | 字段描述   | 插入 | 编辑 | 列表 | 查询 | 查询方式 | 备注          |
| --------------- | ---------- | ---- | ---- | ---- | ---- | -------- | ------------- |
| id              | 奖品 ID    | ❌   | ❌   | ❌   | ❌   | -        | 主键，自增    |
| prize_name      | 奖品名称   | ✅   | ✅   | ✅   | ✅   | LIKE     | 核心字段      |
| total_count     | 奖品总数量 | ✅   | ✅   | ✅   | ❌   | -        | 数值输入      |
| remaining_count | 剩余数量   | ✅   | ✅   | ✅   | ❌   | -        | 数值输入      |
| probability     | 中奖概率   | ✅   | ✅   | ✅   | ❌   | -        | 小数输入(0-1) |

**表单控件建议：**

- `prize_name`: 文本输入框
- `total_count`: 数字输入框
- `remaining_count`: 数字输入框
- `probability`: 数字输入框（步长 0.0001）

---

## 2. redpacket_user_prize_log（用户抽奖记录表）

| 字段名     | 字段描述 | 插入 | 编辑 | 列表 | 查询 | 查询方式 | 备注               |
| ---------- | -------- | ---- | ---- | ---- | ---- | -------- | ------------------ |
| id         | 记录 ID  | ❌   | ❌   | ❌   | ❌   | -        | 主键，自增         |
| user_id    | 用户 ID  | ❌   | ❌   | ✅   | ✅   | EQ       | 系统记录，不可编辑 |
| prize_name | 奖品名称 | ❌   | ❌   | ✅   | ✅   | LIKE     | 系统记录，不可编辑 |
| is_win     | 是否中奖 | ❌   | ❌   | ✅   | ✅   | EQ       | 系统记录，不可编辑 |
| is_used    | 是否使用 | ❌   | ✅   | ✅   | ✅   | EQ       | 可手动修改使用状态 |
| created_at | 抽奖时间 | ❌   | ❌   | ✅   | ✅   | BETWEEN  | 系统记录，不可编辑 |
| ip_address | IP 记录  | ❌   | ❌   | ✅   | ✅   | LIKE     | 系统记录，不可编辑 |

**表单控件建议：**

- `is_used`: 单选框（已使用/未使用）

**特殊说明：** 此表主要用于查看和统计，大部分字段不允许手动编辑

---

## 3. redpacket_event_config（活动配置表）

| 字段名            | 字段描述         | 插入 | 编辑 | 列表 | 查询 | 查询方式 | 备注           |
| ----------------- | ---------------- | ---- | ---- | ---- | ---- | -------- | -------------- |
| id                | 主键             | ❌   | ❌   | ❌   | ❌   | -        | 主键，自增     |
| start_time        | 活动开始时间     | ✅   | ✅   | ✅   | ✅   | BETWEEN  | 日期时间选择器 |
| end_time          | 活动结束时间     | ✅   | ✅   | ✅   | ✅   | BETWEEN  | 日期时间选择器 |
| max_users         | 并发用户上限     | ✅   | ✅   | ✅   | ❌   | -        | 数值输入       |
| max_draws_per_day | 每日最大抽奖次数 | ✅   | ✅   | ✅   | ❌   | -        | 数值输入       |

**表单控件建议：**

- `start_time`: 日期时间选择器
- `end_time`: 日期时间选择器
- `max_users`: 数字输入框
- `max_draws_per_day`: 数字输入框

---

## 4. redpacket_image_resource（图片资源表）

| 字段名        | 字段描述     | 插入 | 编辑 | 列表 | 查询 | 查询方式 | 备注             |
| ------------- | ------------ | ---- | ---- | ---- | ---- | -------- | ---------------- |
| id            | 资源 ID      | ❌   | ❌   | ❌   | ❌   | -        | 主键，自增       |
| resource_name | 资源名称     | ✅   | ✅   | ✅   | ✅   | LIKE     | 核心字段         |
| resource_key  | 资源标识     | ✅   | ✅   | ✅   | ✅   | LIKE     | 唯一标识         |
| file_name     | 文件名       | ✅   | ✅   | ✅   | ❌   | -        | 文件名           |
| file_path     | 文件访问路径 | ✅   | ✅   | ❌   | ❌   | -        | 路径太长，不显示 |
| usage_scene   | 使用场景     | ✅   | ✅   | ✅   | ✅   | EQ       | 下拉选择         |
| description   | 描述         | ✅   | ✅   | ✅   | ❌   | -        | 文本域           |

**表单控件建议：**

- `resource_name`: 文本输入框
- `resource_key`: 文本输入框
- `file_name`: 文本输入框
- `file_path`: 文本输入框
- `usage_scene`: 下拉选择框
- `description`: 文本域

---

## 5. redpacket_top10_popular_food（TOP10 网络人气特色美食表）

| 字段名    | 字段描述 | 插入 | 编辑 | 列表 | 查询 | 查询方式 | 备注           |
| --------- | -------- | ---- | ---- | ---- | ---- | -------- | -------------- |
| id        | 美食 ID  | ❌   | ❌   | ❌   | ❌   | -        | 主键，自增     |
| food_name | 美食名称 | ✅   | ✅   | ✅   | ✅   | LIKE     | 核心字段       |
| ranking   | 排名     | ✅   | ✅   | ✅   | ✅   | EQ       | 数值输入(1-10) |

**表单控件建议：**

- `food_name`: 文本输入框
- `ranking`: 数字输入框（范围 1-10）

**验证规则：**

- `ranking`: 必须在 1-10 之间，且唯一

---

## 6. redpacket_town_specialty_food（"一镇一品"特色菜表）

| 字段名    | 字段描述  | 插入 | 编辑 | 列表 | 查询 | 查询方式 | 备注       |
| --------- | --------- | ---- | ---- | ---- | ---- | -------- | ---------- |
| id        | 特色菜 ID | ❌   | ❌   | ❌   | ❌   | -        | 主键，自增 |
| food_name | 美食名称  | ✅   | ✅   | ✅   | ✅   | LIKE     | 核心字段   |
| ranking   | 排名      | ✅   | ✅   | ✅   | ✅   | EQ       | 数值输入   |

**表单控件建议：**

- `food_name`: 文本输入框
- `ranking`: 数字输入框

---

## 查询方式说明

| 查询方式 | 说明     | 适用场景                |
| -------- | -------- | ----------------------- |
| EQ       | 等于     | 精确匹配，如状态、ID 等 |
| LIKE     | 模糊查询 | 文本搜索，如名称等      |
| BETWEEN  | 范围查询 | 时间范围、数值范围等    |

---

## 生成建议

### 功能权限配置：

- **奖品配置**: 增删改查
- **抽奖记录**: 查看、导出（不允许增删改）
- **活动配置**: 增删改查
- **图片资源**: 增删改查
- **美食管理**: 增删改查

### 菜单结构建议：

```
红包雨管理
├── 奖品配置
├── 抽奖记录
├── 活动配置
├── 图片资源
├── TOP10美食
└── 特色菜管理
```

### 特殊处理：

1. **抽奖记录表**: 设置为只读模式，只允许查看和导出
2. **活动配置表**: 通常只有一条记录，可以设计为配置页面而非列表页面
3. **排名字段**: 需要添加唯一性验证
4. **时间字段**: 使用日期时间选择器，支持范围查询

---

## 代码生成后需要手动调整的地方

1. **抽奖记录表**: 移除新增、编辑按钮，只保留查看功能
2. **活动配置表**: 可能需要改为单条记录的配置页面
3. **排名字段**: 添加唯一性校验和范围校验
4. **文件上传**: 图片资源表可能需要集成文件上传功能
5. **状态字段**: 使用字典配置，显示中文标签

这个配置可以让你快速生成基础的 CRUD 功能，然后根据实际业务需求进行调整。
