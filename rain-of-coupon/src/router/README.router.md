# çº¢åŒ…é›¨è·¯ç”±é…ç½®è¯´æ˜

## ğŸ¯ **ç”¨æˆ·æµç¨‹**

```
é¦–é¡µ (/) â†’ ç™»å½• (/login) â†’ åŠ è½½ (/loading) â†’ å€’è®¡æ—¶ (/countdown) â†’ çº¢åŒ…é›¨ (/redpacket) â†’ è¿”å›é¦–é¡µ
                    â†“
                è§„åˆ™é¡µé¢ (/rule)
                    â†“  
              æˆ‘çš„ä¼˜æƒ åˆ¸ (/coupon)
```

## ğŸ“‹ **è·¯ç”±é…ç½®**

| è·¯ç”± | ç»„ä»¶ | è¯´æ˜ | æƒé™ |
|------|------|------|------|
| `/` | HomePage | æ´»åŠ¨å…¥å£é¡µé¢ | å…¬å¼€ |
| `/login` | LoginPage | ç”¨æˆ·ç™»å½• | å…¬å¼€ |
| `/loading` | LoadingPage | åŠ è½½å’Œæ‹¥æŒ¤æ£€æµ‹ | éœ€ç™»å½• |
| `/countdown` | CountdownPage | 3ç§’å€’è®¡æ—¶ | éœ€ç™»å½• |
| `/redpacket` | RedPacketPage | çº¢åŒ…é›¨æ¸¸æˆ | éœ€ç™»å½•+æ´»åŠ¨ä¸­ |
| `/rule` | RulePage | æ´»åŠ¨è§„åˆ™ | å…¬å¼€ |
| `/coupon` | CouponPage | æˆ‘çš„ä¼˜æƒ åˆ¸ | éœ€ç™»å½• |

## ğŸ”„ **æ ¸å¿ƒä¸šåŠ¡é€»è¾‘**

1. **ç™»å½•æ£€æŸ¥**: åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å·²ä¸­å¥–
2. **æ‹¥æŒ¤æ£€æµ‹**: æ£€æŸ¥æœåŠ¡å™¨è´Ÿè½½
3. **æµç¨‹æ§åˆ¶**: ä¸¥æ ¼æŒ‰ç…§ loading â†’ countdown â†’ redpacket é¡ºåº
4. **ä¸­å¥–é™åˆ¶**: æ¯äººåªèƒ½ä¸­ä¸€æ¬¡å¥–

## ğŸ›¡ï¸ **è·¯ç”±å®ˆå«**

**æ–‡ä»¶ä½ç½®**: `redpacket-guards.js`

- **beforeEnterLoading**: æ£€æŸ¥ç™»å½•çŠ¶æ€å’Œä¸­å¥–çŠ¶æ€
- **beforeEnterCountdown**: æ£€æŸ¥æ´»åŠ¨çŠ¶æ€å’Œç”¨æˆ·èµ„æ ¼  
- **beforeEnterRedPacket**: éªŒè¯é¡µé¢è·³è½¬é¡ºåº
- **beforeEnterCoupon**: æ£€æŸ¥ç™»å½•çŠ¶æ€

## ğŸ® **ç»„ä»¶ç±»å‹**

### é¡µé¢ç»„ä»¶ï¼ˆè·¯ç”±ï¼‰
- **HomePage**: æ´»åŠ¨å…¥å£
- **LoginPage**: ç”¨æˆ·ç™»å½•
- **LoadingPage**: åŠ è½½æ£€æµ‹
- **CountdownPage**: å€’è®¡æ—¶
- **RedPacketPage**: çº¢åŒ…é›¨æ¸¸æˆ
- **RulePage**: æ´»åŠ¨è§„åˆ™
- **CouponPage**: æˆ‘çš„ä¼˜æƒ åˆ¸

### å¼¹çª—ç»„ä»¶ï¼ˆéè·¯ç”±ï¼‰
- **PrizeModal**: ä¸­å¥–å¼¹çª—
- **EncourageTip**: æœªä¸­å¥–æç¤º
- **CrowdingTip**: æ‹¥æŒ¤æç¤º

## ğŸ”§ **å…³é”®å®ç°**

### ç™»å½•åçŠ¶æ€åˆ¤æ–­
```javascript
const userStatus = await store.dispatch('lottery/fetchUserStatus')
if (userStatus.hasEverWon) {
  this.$router.push('/')  // æ˜¾ç¤ºä¸­å¥–å¼¹çª—
} else {
  this.$router.push('/loading')  // è¿›å…¥æ¸¸æˆæµç¨‹
}
```

### æ‹¥æŒ¤æ£€æµ‹
```javascript
if (userStatus.isCrowded) {
  // æ˜¾ç¤ºæ‹¥æŒ¤æç¤º
} else {
  this.$router.push('/countdown')
}
```

### æµç¨‹æ§åˆ¶
- ä¸¥æ ¼æŒ‰ç…§é¡µé¢é¡ºåºè·³è½¬
- é˜²æ­¢è·³è¿‡ä¸­é—´æ­¥éª¤
- å¼‚å¸¸æƒ…å†µç»Ÿä¸€å¤„ç†